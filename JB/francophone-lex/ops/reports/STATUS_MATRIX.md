# Production Readiness Status Matrix

| Area | Plan requirement | Artifact/Path/Endpoint | Evidence | PASS/FAIL/UNKNOWN | Severity | Owner | Notes/Links |
| --- | --- | --- | --- | --- | --- | --- | --- |
| Data/RLS | `public.is_org_member` helper + RLS on org tables | supabase/migrations/20240101000200_auth_orgs.sql; supabase/migrations/20240101000500_rls.sql | Function defined and applied across org-scoped tables (`supabase/migrations/20240101000200_auth_orgs.sql:22-33`, `supabase/migrations/20240101000500_rls.sql:1-44`). | PASS | n/a | Platform | RLS scaffold matches plan expectations. |
| Security/Secrets | Example env must not contain live secrets | .env.example | Placeholder credentials committed (`.env.example:1-30`); production secrets must be rotated post-exposure. | PASS | n/a | Security | Sanitised repo; ensure provider-side key rotation completed. |
| Backend/Agents | Tools registered incl. `computeCaseScore`, `buildTreatmentGraph` | docs/SUPABASE_AND_AGENT_MANIFEST.yaml; apps/api/src/agent.ts | Tools implemented with persistence (`apps/api/src/agent.ts:3402-3910`). | PASS | n/a | Agents | Outputs recorded in `case_scores` and `agent_learning_jobs`. |
| Backend/Agents | Output guardrails: allowlist, binding language, structured IRAC, sensitive-topic HITL | apps/api/src/agent.ts | Guardrails added with HITL escalation handler (`apps/api/src/agent.ts:884-1010`, `apps/api/src/agent.ts:4080-4171`). | PASS | n/a | Agents | Guardrail triggers now retry once then emit HITL payload. |
| Data/Allowlist | Domains for FR/BE/LU/CH-FR/CA-QC/MC/OHADA/MA/TN/DZ/RW/EU (+OAPI/CIMA) | packages/shared/src/constants/allowlist.ts; packages/shared/src/constants/jurisdictions.ts | Rwanda domains + metadata present (`packages/shared/src/constants/allowlist.ts:1-28`, `packages/shared/src/constants/jurisdictions.ts:13-98`). | PASS | n/a | Data | UI badges render Rwanda readiness. |
| Data/Embeddings | `document_chunks` vector(3072) with HNSW | supabase/migrations/20240101011900_document_chunks_3072.sql; supabase/migrations/20240101012000_update_match_chunks_dimension.sql | Column and RPC upgraded to 3072-dim embeddings. | PASS | n/a | Data | Requires re-embedding via `pnpm ops:vector-store --reembed`. |
| Ingestion/RAG | GDrive→OpenAI vector store→Supabase mirror with READY polling | apps/ops/src/vector-store.ts | READY polling with timeout/retries implemented (`apps/ops/src/vector-store.ts:1-190`). | PASS | n/a | Ops | Vector sync waits for OpenAI READY and marks failures with error message. |
| Backend/Compliance | France-mode judge analytics guard & HITL escalation | apps/api/src/agent.ts | Guard triggers, blocks run, and records compliance events (`apps/api/src/agent.ts:4043-4125`). | PASS | n/a | Compliance | Matches governance requirement. |
| Frontend/Confidential | Confidential mode disables web search, local cache, previews | apps/web/src/hooks/use-outbox.ts; apps/web/src/components/research/research-view.tsx | Confidential prompts kept in-memory, telemetry suppressed, UI blurred (`apps/web/src/hooks/use-outbox.ts:34-60`, `apps/web/src/components/research/research-view.tsx:140-460`). | PASS | n/a | Frontend | Confidential mode now avoids local cache and masks previews. |
| Frontend/Localization | Rwanda triage & banner surfaced in context | apps/web/src/components/research/research-view.tsx | Rwanda badges + banner rendered when applicable (`apps/web/src/components/research/research-view.tsx:133-210`). | PASS | n/a | Frontend | Aligns with triage requirement. |
| Frontend/PWA | Manifest shortcuts + install flow after success | apps/web/app/manifest.ts; apps/web/src/components/app-shell.tsx | Manifest exposes shortcuts & install prompt follows run success (`apps/web/app/manifest.ts:4-34`, `apps/web/src/components/app-shell.tsx:1-180`). | PASS | n/a | Frontend | Install banner stored after successful analysis, supports dismiss/trigger. |
| Observability/CI | Eval thresholds gating (citations/temporal/hitl/web vitals) in CI | apps/ops/src/evaluate.ts; .github/workflows/ci.yml | `ops:evaluate --ci` exits non-zero when thresholds breached; CI step already wired (`apps/ops/src/evaluate.ts:620-714`, `.github/workflows/ci.yml:60-87`). | PASS | n/a | Ops | Summary written to `ops/reports/evaluation-summary.json` with failure exit on regressions. |
| Security/DR | Documented restore/rollback drill | docs/governance/disaster_recovery_runbook.md; apps/web/public/governance/disaster_recovery_runbook.md | Runbook defines RPO/RTO, rollback steps, and quarterly drill (`docs/governance/disaster_recovery_runbook.md:1-120`). | PASS | n/a | Platform | Trust Center publishes the DR runbook; drills scheduled quarterly. |
| Observability/Web | Core Web Vitals instrumentation & reporting | apps/web/reportWebVitals.ts; apps/api/src/server.ts; apps/ops/src/performance-snapshot.ts | Web vitals dispatched to telemetry, surfaced in operations overview, and captured in performance snapshots. | PASS | n/a | Frontend/Ops | Alerts raised when LCP/INP/CLS budgets breached; stored with snapshots metadata. |
